(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{931:function(e,t,n){"use strict";n.r(t);n(19);var c,o=n(15),r=(n(725),n(78),n(726)),l=n.n(r),d=(n(727),n(728)),v=n.n(d),m=(n(868),n(869)),h=n.n(m),f=(n(870),n(871)),w=n.n(f),D={middleware:"authenticated",components:(c={},Object(o.a)(c,w.a.name,w.a),Object(o.a)(c,h.a.name,h.a),Object(o.a)(c,v.a.name,v.a),Object(o.a)(c,l.a.name,l.a),c),data:function(){return{texto:"",newDevice:{name:"",dId:""}}},mounted:function(){this.$store.dispatch("getDevices")},methods:{deleteDevice:function(e,t){var n=this,c=prompt("Type the password");if(this.texto=c,"123123"==this.texto){var o={headers:{token:this.$store.state.auth.token},params:{dId:e.dId}};this.$axios.delete("/device",o).then((function(t){"success"==t.data.status&&(n.$notify({type:"success",icon:"tim-icons icon-check-2",message:e.name+" deleted!"}),n.$store.dispatch("getDevices")),$nuxt.$emit("time-to-get-devices")})).catch((function(t){console.log(t),n.$notify({type:"danger",icon:"tim-icons icon-alert-circle-exc",message:" Error deleting "+e.name})}))}else this.$notify({type:"danger",icon:"tim-icons icon-alert-circle-exc",message:" Error deleting "+e.name})},createNewDevice:function(){var e=this;if(""!=this.newDevice.name)if(""!=this.newDevice.dId){var t={headers:{token:this.$store.state.auth.token}},n={newDevice:this.newDevice};this.$axios.post("/device",n,t).then((function(t){if("success"==t.data.status)return e.newDevice.name="",e.newDevice.dId="",e.$notify({type:"success",icon:"tim-icons icon-check-2",message:"Success! Device was added"}),void e.$store.dispatch("getDevices")})).catch((function(t){return"error"==t.response.data.status&&"unique"==t.response.data.error.errors.dId.kind?void e.$notify({type:"warning",icon:"tim-icons icon-alert-circle-exc",message:"The device is already registered in the system. Try another device"}):void e.showNotify("danger","Error")}))}else this.$notify({type:"warning",icon:"tim-icons icon-alert-circle-exc",message:" Device ID is Empty :("});else this.$notify({type:"warning",icon:"tim-icons icon-alert-circle-exc",message:" Device Name is Empty :("})}}},y=n(2),component=Object(y.a)(D,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("h4",{staticClass:"card-title"},[e._v("Add new Device")])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("base-input",{attrs:{label:"Device name",type:"text",placeholder:"Ex: Maquina 1, Maquina mantenimiento..."},model:{value:e.newDevice.name,callback:function(t){e.$set(e.newDevice,"name",t)},expression:"newDevice.name"}})],1),e._v(" "),t("div",{staticClass:"col-6"},[t("base-input",{attrs:{label:"Device Id",type:"text",placeholder:"Ex: 4324"},model:{value:e.newDevice.dId,callback:function(t){e.$set(e.newDevice,"dId",t)},expression:"newDevice.dId"}})],1)]),e._v(" "),t("div",{staticClass:"row pull-right"},[t("div",{staticClass:"col-12"},[t("base-button",{staticClass:"mb-3",attrs:{type:"blue",size:"lg"},on:{click:function(t){return e.createNewDevice()}}},[e._v("Add")])],1)])])],1),e._v(" "),t("div",{staticClass:"row"},[t("card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("h4",{staticClass:"card-tittle"},[e._v("Devices")])]),e._v(" "),t("el-table",{staticClass:"table-striped",attrs:{data:e.$store.state.devices}},[t("el-table-column",{attrs:{type:"index",label:"#","min-width":"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var c=n.$index;return t("div",{},[e._v("\n            "+e._s(c+1)+"\n          ")])}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"Name"}}),e._v(" "),t("el-table-column",{attrs:{prop:"dId",label:"Device Id"}}),e._v(" "),t("el-table-column",{attrs:{label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(n){var c=n.row,o=n.$index;return t("div",{},[t("el-tooltip",{attrs:{content:"Delete",effect:"light","open-delay":300,placement:"top"}},[t("base-button",{staticClass:"btn-link",attrs:{type:"danger",icon:"",size:"sm"},on:{click:function(t){return e.deleteDevice(c,o)}}},[t("i",{staticClass:"tim-icons icon-simple-remove"})])],1)],1)}}])})],1)],1)],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{BaseInput:n(104).default,BaseButton:n(63).default,Card:n(51).default})}}]);